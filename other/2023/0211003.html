<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chart - 条形图 | 博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="">
    
    <link rel="preload" href="/blog/assets/css/0.styles.08f86ff6.css" as="style"><link rel="preload" href="/blog/assets/js/app.ba2a4ce1.js" as="script"><link rel="preload" href="/blog/assets/js/6.8cba4c74.js" as="script"><link rel="preload" href="/blog/assets/js/1.06eefe51.js" as="script"><link rel="preload" href="/blog/assets/js/22.1e20a2ba.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.c8f8c507.js"><link rel="prefetch" href="/blog/assets/js/100.3bc4897b.js"><link rel="prefetch" href="/blog/assets/js/101.79164cb2.js"><link rel="prefetch" href="/blog/assets/js/102.b652a461.js"><link rel="prefetch" href="/blog/assets/js/103.c815a8d8.js"><link rel="prefetch" href="/blog/assets/js/104.5aafc8ba.js"><link rel="prefetch" href="/blog/assets/js/105.ff97f2ac.js"><link rel="prefetch" href="/blog/assets/js/106.a5425060.js"><link rel="prefetch" href="/blog/assets/js/107.7fe0d2cf.js"><link rel="prefetch" href="/blog/assets/js/108.8018afa7.js"><link rel="prefetch" href="/blog/assets/js/109.eb028035.js"><link rel="prefetch" href="/blog/assets/js/11.ad9866c4.js"><link rel="prefetch" href="/blog/assets/js/110.fbb15e30.js"><link rel="prefetch" href="/blog/assets/js/111.7936637d.js"><link rel="prefetch" href="/blog/assets/js/12.d353347d.js"><link rel="prefetch" href="/blog/assets/js/13.46f9cf00.js"><link rel="prefetch" href="/blog/assets/js/14.c399fe23.js"><link rel="prefetch" href="/blog/assets/js/15.8a0a01d7.js"><link rel="prefetch" href="/blog/assets/js/16.ae531251.js"><link rel="prefetch" href="/blog/assets/js/17.6accbe65.js"><link rel="prefetch" href="/blog/assets/js/18.7bc6abed.js"><link rel="prefetch" href="/blog/assets/js/19.6a152c19.js"><link rel="prefetch" href="/blog/assets/js/20.7f0eafb2.js"><link rel="prefetch" href="/blog/assets/js/21.366abd8d.js"><link rel="prefetch" href="/blog/assets/js/23.f0bc6e40.js"><link rel="prefetch" href="/blog/assets/js/24.8b5042c1.js"><link rel="prefetch" href="/blog/assets/js/25.bb2c273a.js"><link rel="prefetch" href="/blog/assets/js/26.9a5dd79f.js"><link rel="prefetch" href="/blog/assets/js/27.eed04845.js"><link rel="prefetch" href="/blog/assets/js/28.cba7cdb3.js"><link rel="prefetch" href="/blog/assets/js/29.a3221126.js"><link rel="prefetch" href="/blog/assets/js/3.fa158c8d.js"><link rel="prefetch" href="/blog/assets/js/30.a6f66c73.js"><link rel="prefetch" href="/blog/assets/js/31.14b38ac1.js"><link rel="prefetch" href="/blog/assets/js/32.c5a502eb.js"><link rel="prefetch" href="/blog/assets/js/33.67f93c10.js"><link rel="prefetch" href="/blog/assets/js/34.e370b22e.js"><link rel="prefetch" href="/blog/assets/js/35.7be0fadf.js"><link rel="prefetch" href="/blog/assets/js/36.654c299d.js"><link rel="prefetch" href="/blog/assets/js/37.8b624bcc.js"><link rel="prefetch" href="/blog/assets/js/38.25ab3b2c.js"><link rel="prefetch" href="/blog/assets/js/39.060de666.js"><link rel="prefetch" href="/blog/assets/js/4.c000dc19.js"><link rel="prefetch" href="/blog/assets/js/40.53b206b2.js"><link rel="prefetch" href="/blog/assets/js/41.c4c5bd9d.js"><link rel="prefetch" href="/blog/assets/js/42.092bca4b.js"><link rel="prefetch" href="/blog/assets/js/43.069bcee1.js"><link rel="prefetch" href="/blog/assets/js/44.37c3e654.js"><link rel="prefetch" href="/blog/assets/js/45.a4af8b25.js"><link rel="prefetch" href="/blog/assets/js/46.96f2c771.js"><link rel="prefetch" href="/blog/assets/js/47.dbb8b190.js"><link rel="prefetch" href="/blog/assets/js/48.c8609bba.js"><link rel="prefetch" href="/blog/assets/js/49.ba22664c.js"><link rel="prefetch" href="/blog/assets/js/5.8250cfa9.js"><link rel="prefetch" href="/blog/assets/js/50.0145928a.js"><link rel="prefetch" href="/blog/assets/js/51.ac971dda.js"><link rel="prefetch" href="/blog/assets/js/52.03b53cf5.js"><link rel="prefetch" href="/blog/assets/js/53.d21f9d11.js"><link rel="prefetch" href="/blog/assets/js/54.46747efe.js"><link rel="prefetch" href="/blog/assets/js/55.44d973d3.js"><link rel="prefetch" href="/blog/assets/js/56.ea38b65c.js"><link rel="prefetch" href="/blog/assets/js/57.3074d209.js"><link rel="prefetch" href="/blog/assets/js/58.7c54955b.js"><link rel="prefetch" href="/blog/assets/js/59.ca8df4e6.js"><link rel="prefetch" href="/blog/assets/js/60.e8f4b9b0.js"><link rel="prefetch" href="/blog/assets/js/61.2b7c002a.js"><link rel="prefetch" href="/blog/assets/js/62.ec72cfd4.js"><link rel="prefetch" href="/blog/assets/js/63.63396ab2.js"><link rel="prefetch" href="/blog/assets/js/64.996cf232.js"><link rel="prefetch" href="/blog/assets/js/65.77a7f64d.js"><link rel="prefetch" href="/blog/assets/js/66.8ca0acc3.js"><link rel="prefetch" href="/blog/assets/js/67.70c3f949.js"><link rel="prefetch" href="/blog/assets/js/68.008f90a0.js"><link rel="prefetch" href="/blog/assets/js/69.12ffdba1.js"><link rel="prefetch" href="/blog/assets/js/7.d41731f2.js"><link rel="prefetch" href="/blog/assets/js/70.787787fd.js"><link rel="prefetch" href="/blog/assets/js/71.580d1376.js"><link rel="prefetch" href="/blog/assets/js/72.4fc053d0.js"><link rel="prefetch" href="/blog/assets/js/73.025452b9.js"><link rel="prefetch" href="/blog/assets/js/74.7173306f.js"><link rel="prefetch" href="/blog/assets/js/75.7fe58c41.js"><link rel="prefetch" href="/blog/assets/js/76.37cbc61f.js"><link rel="prefetch" href="/blog/assets/js/77.c70556cb.js"><link rel="prefetch" href="/blog/assets/js/78.484af6f5.js"><link rel="prefetch" href="/blog/assets/js/79.327d2da1.js"><link rel="prefetch" href="/blog/assets/js/8.a88a1d36.js"><link rel="prefetch" href="/blog/assets/js/80.2de955fe.js"><link rel="prefetch" href="/blog/assets/js/81.ecc94d58.js"><link rel="prefetch" href="/blog/assets/js/82.da042fcc.js"><link rel="prefetch" href="/blog/assets/js/83.85f6779c.js"><link rel="prefetch" href="/blog/assets/js/84.95b819dd.js"><link rel="prefetch" href="/blog/assets/js/85.bed4ad5f.js"><link rel="prefetch" href="/blog/assets/js/86.31523f7c.js"><link rel="prefetch" href="/blog/assets/js/87.ab53c637.js"><link rel="prefetch" href="/blog/assets/js/88.33d1f23c.js"><link rel="prefetch" href="/blog/assets/js/89.f398157f.js"><link rel="prefetch" href="/blog/assets/js/9.54f0bd1f.js"><link rel="prefetch" href="/blog/assets/js/90.7d0b95a6.js"><link rel="prefetch" href="/blog/assets/js/91.65d79759.js"><link rel="prefetch" href="/blog/assets/js/92.039243d7.js"><link rel="prefetch" href="/blog/assets/js/93.fcf55c5d.js"><link rel="prefetch" href="/blog/assets/js/94.2a0c3096.js"><link rel="prefetch" href="/blog/assets/js/95.4529531e.js"><link rel="prefetch" href="/blog/assets/js/96.c98e81af.js"><link rel="prefetch" href="/blog/assets/js/97.b1e66d90.js"><link rel="prefetch" href="/blog/assets/js/98.dd50b5da.js"><link rel="prefetch" href="/blog/assets/js/99.8c7dc5a0.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.08f86ff6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-5bb33761><div data-v-5bb33761><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-5bb33761 data-v-5bb33761><h3 class="title" data-v-59e6cb88>博客</h3> <p class="description" data-v-59e6cb88></p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>土豆</span>
          
        <span data-v-59e6cb88>2021 - </span>
        2024
      </a></span></div></div> <div class="hide" data-v-5bb33761><header class="navbar" data-v-5bb33761><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  home
</a></div><div class="nav-item"><a href="/blog/other/2022/0929001.html" class="nav-link"><i class="iconfont reco-other"></i>
  软件
</a></div><div class="nav-item"><a href="https://github.com/zhoubin-datareachable" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://support.qq.com/product/435903" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-suggestion"></i>
  留言板
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-5bb33761></div> <aside class="sidebar" data-v-5bb33761><div class="personal-info-wrapper" data-v-1fad0c41 data-v-5bb33761><img src="/blogavatar.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    土豆
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>100</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>31</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  home
</a></div><div class="nav-item"><a href="/blog/other/2022/0929001.html" class="nav-link"><i class="iconfont reco-other"></i>
  软件
</a></div><div class="nav-item"><a href="https://github.com/zhoubin-datareachable" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://support.qq.com/product/435903" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-suggestion"></i>
  留言板
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-5bb33761><h3 class="title" data-v-59e6cb88>Chart - 条形图</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>土豆</span>
          
        <span data-v-59e6cb88>2021 - </span>
        2024
      </a></span></div></div> <div data-v-5bb33761><div data-v-5bb33761><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Chart - 条形图</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>土豆</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2023/2/11</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="计算-label-的最大宽度"><a href="#计算-label-的最大宽度" class="header-anchor">#</a> 计算 label 的最大宽度</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/measureText" target="_blank" rel="noopener noreferrer">MND<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>测量文本 TextMetrics 对象包含的信息,宽度信息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> text <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">measureText</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TextMetrics object</span>
text<span class="token punctuation">.</span>width<span class="token punctuation">;</span> <span class="token comment">// 16;</span>
</code></pre></div><p><img src="/blogassets/img/image-20230105154614264.7c86344a.png" alt="image-20230105154614264"></p> <p>获取 label 最大宽度</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> barChartData <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">labels</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'January'</span><span class="token punctuation">,</span> <span class="token string">'February'</span><span class="token punctuation">,</span> <span class="token string">'March'</span><span class="token punctuation">,</span> <span class="token string">'April'</span><span class="token punctuation">,</span> <span class="token string">'May'</span><span class="token punctuation">,</span> <span class="token string">'June'</span><span class="token punctuation">,</span> <span class="token string">'July'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">datasets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">fillColor</span><span class="token operator">:</span> <span class="token string">'rgba(220,220,220,0.5)'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">strokeColor</span><span class="token operator">:</span> <span class="token string">'rgba(220,220,220,1)'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">fillColor</span><span class="token operator">:</span> <span class="token string">'rgba(151,187,205,0.5)'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">strokeColor</span><span class="token operator">:</span> <span class="token string">'rgba(151,187,205,1)'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">96</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>计算最大宽度</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 最大宽度</span>
widestXLabel <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 获取文本最大宽度
 * 依次遍历labels所有文本，计算最大的宽度
 */</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>labels<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> textLength <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">measureText</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>labels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
  widestXLabel <span class="token operator">=</span> textLength <span class="token operator">&gt;</span> widestXLabel <span class="token operator">?</span> textLength <span class="token operator">:</span> widestXLabel<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="计算画布最大高度"><a href="#计算画布最大高度" class="header-anchor">#</a> 计算画布最大高度</h2> <p>当一行不足以放下 label 时需要将 label 倾斜，倾斜后图标高度要重新计算</p> <p><img src="/blogassets/img/image-20230105163708925.3b5f0e6a.png" alt="image-20230105163708925"></p> <p>数据集</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> barChartData <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">labels</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'January========'</span><span class="token punctuation">,</span>
    <span class="token string">'February'</span><span class="token punctuation">,</span>
    <span class="token string">'March'</span><span class="token punctuation">,</span>
    <span class="token string">'April'</span><span class="token punctuation">,</span>
    <span class="token string">'May'</span><span class="token punctuation">,</span>
    <span class="token string">'June'</span><span class="token punctuation">,</span>
    <span class="token string">'July'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">datasets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">fillColor</span><span class="token operator">:</span> <span class="token string">'rgba(220,220,220,0.5)'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">strokeColor</span><span class="token operator">:</span> <span class="token string">'rgba(220,220,220,1)'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">fillColor</span><span class="token operator">:</span> <span class="token string">'rgba(151,187,205,0.5)'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">strokeColor</span><span class="token operator">:</span> <span class="token string">'rgba(151,187,205,1)'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">96</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>实现代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * rotateLabels 旋转角度
 */</span>

<span class="token comment">// 如果所有文字总宽度大于最大宽度就倾斜 45度</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>width <span class="token operator">/</span> data<span class="token punctuation">.</span>labels<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> widestXLabel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 倾斜45度</span>
  rotateLabels <span class="token operator">=</span> <span class="token number">45</span><span class="token punctuation">;</span>
  <span class="token comment">// 如果所有文字倾斜后的总宽度大于最大宽度就倾斜 90度</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>width <span class="token operator">/</span> data<span class="token punctuation">.</span>labels<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>rotateLabels<span class="token punctuation">)</span> <span class="token operator">*</span> widestXLabel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    rotateLabels <span class="token operator">=</span> <span class="token number">90</span><span class="token punctuation">;</span>
    <span class="token comment">// 图表高度 = 等于总画布高度 - 文字高度</span>
    maxSize <span class="token operator">-=</span> widestXLabel<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 图表高度 = 等于总画布高度 - 文字高度</span>
    maxSize <span class="token operator">-=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>rotateLabels<span class="token punctuation">)</span> <span class="token operator">*</span> widestXLabel<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// 图表高度 = 等于总画布高度 - 文字高度</span>
  maxSize <span class="token operator">-=</span> config<span class="token punctuation">.</span>scaleFontSize<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 文字和图标之间添加一些边距</span>
maxSize <span class="token operator">-=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token comment">// label高度=字体大小</span>
labelHeight <span class="token operator">=</span> config<span class="token punctuation">.</span>scaleFontSize<span class="token punctuation">;</span>
<span class="token comment">// 减去label高度</span>
maxSize <span class="token operator">-=</span> labelHeight<span class="token punctuation">;</span>
<span class="token comment">// 高度</span>
scaleHeight <span class="token operator">=</span> maxSize<span class="token punctuation">;</span>
</code></pre></div><h2 id="计算最大最小值"><a href="#计算最大最小值" class="header-anchor">#</a> 计算最大最小值</h2> <p><img src="/blogassets/img/image-20230106094110794.97adb23f.png" alt="image-20230106094110794"></p> <p>数据集</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> barChartData <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">labels</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'January'</span><span class="token punctuation">,</span> <span class="token string">'February'</span><span class="token punctuation">,</span> <span class="token string">'March'</span><span class="token punctuation">,</span> <span class="token string">'April'</span><span class="token punctuation">,</span> <span class="token string">'May'</span><span class="token punctuation">,</span> <span class="token string">'June'</span><span class="token punctuation">,</span> <span class="token string">'July'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">datasets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">fillColor</span><span class="token operator">:</span> <span class="token string">'rgba(220,220,220,0.5)'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">strokeColor</span><span class="token operator">:</span> <span class="token string">'rgba(220,220,220,1)'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">fillColor</span><span class="token operator">:</span> <span class="token string">'rgba(151,187,205,0.5)'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">strokeColor</span><span class="token operator">:</span> <span class="token string">'rgba(151,187,205,1)'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">96</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>实现</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 最大值</span>
<span class="token keyword">var</span> upperValue <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">;</span>
<span class="token comment">// 最小值</span>
<span class="token keyword">var</span> lowerValue <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>datasets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>datasets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> upperValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      upperValue <span class="token operator">=</span> data<span class="token punctuation">.</span>datasets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>datasets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> lowerValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lowerValue <span class="token operator">=</span> data<span class="token punctuation">.</span>datasets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'upperValue'</span><span class="token punctuation">,</span> upperValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'lowerValue'</span><span class="token punctuation">,</span> lowerValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 19</span>
<span class="token comment">// 分段数量，图中总共分段18段</span>
<span class="token comment">// 最多分段</span>
<span class="token keyword">const</span> maxSteps <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>scaleHeight <span class="token operator">/</span> <span class="token punctuation">(</span>labelHeight <span class="token operator">*</span> <span class="token number">0.66</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 53</span>
<span class="token comment">// 最小分段</span>
<span class="token keyword">const</span> minSteps <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>scaleHeight <span class="token operator">/</span> labelHeight<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 17</span>
</code></pre></div><h2 id="刻度计算-scale"><a href="#刻度计算-scale" class="header-anchor">#</a> 刻度计算 scale</h2> <p><img src="/blogassets/img/image-20230106094110794.97adb23f.png" alt="image-20230106094110794"></p> <h3 id="保留小数位数"><a href="#保留小数位数" class="header-anchor">#</a> 保留小数位数</h3> <p><code>Number.prototype.toFixed()</code>使用定点表示法来格式化一个数值。<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">financial</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Number<span class="token punctuation">.</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">financial</span><span class="token punctuation">(</span><span class="token number">123.456</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: &quot;123.46&quot;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">financial</span><span class="token punctuation">(</span><span class="token number">0.004</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: &quot;0.00&quot;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">financial</span><span class="token punctuation">(</span><span class="token string">'1.23e+5'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: &quot;123000.00&quot;</span>
</code></pre></div><p>获取小数位数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getDecimalPlaces</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">%</span> <span class="token number">1</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fixed'</span><span class="token punctuation">,</span> <span class="token function">getDecimalPlaces</span><span class="token punctuation">(</span><span class="token number">1.11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fixed'</span><span class="token punctuation">,</span> <span class="token function">getDecimalPlaces</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre></div><h3 id="计算数量级"><a href="#计算数量级" class="header-anchor">#</a> 计算数量级</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">calculateOrderOfMagnitude</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token constant">LN10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">calculateOrderOfMagnitude</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">calculateOrderOfMagnitude</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">calculateOrderOfMagnitude</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">calculateOrderOfMagnitude</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">calculateOrderOfMagnitude</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
</code></pre></div><h3 id="计算刻度相关参数"><a href="#计算刻度相关参数" class="header-anchor">#</a> 计算刻度相关参数</h3> <p>计算刻度<strong>最小值</strong>，<strong>刻度值</strong>，<strong>总刻度数量</strong>，<strong>刻度文本列表</strong></p> <p><img src="/blogassets/img/image-20230106110510556.b35b2da7.png" alt="image-20230106110510556"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 计算值的范围 maxValue 100,minValue 19</span>
<span class="token keyword">const</span> valueRange <span class="token operator">=</span> maxValue <span class="token operator">-</span> minValue<span class="token punctuation">;</span> <span class="token comment">// 81</span>

<span class="token keyword">const</span> graphMin <span class="token operator">=</span>
  Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>minValue <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> rangeOrderOfMagnitude<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span>
  Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> rangeOrderOfMagnitude<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 最小刻度 10</span>

<span class="token keyword">const</span> graphMax <span class="token operator">=</span>
  Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>maxValue <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> rangeOrderOfMagnitude<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span>
  Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> rangeOrderOfMagnitude<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 最大刻度 100</span>

<span class="token keyword">const</span> graphRange <span class="token operator">=</span> graphMax <span class="token operator">-</span> graphMin<span class="token punctuation">;</span> <span class="token comment">// 差值，范围  100 - 10 = 90</span>

<span class="token comment">// 每一步的进度值</span>
<span class="token keyword">const</span> stepValue <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> rangeOrderOfMagnitude<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>

<span class="token comment">// 总刻度数量</span>
<span class="token keyword">const</span> numberOfSteps <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>graphRange <span class="token operator">/</span> stepValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9</span>

<span class="token comment">/**
 * minSteps 17,maxSteps 53
 */</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>numberOfSteps <span class="token operator">&lt;</span> minSteps <span class="token operator">||</span> numberOfSteps <span class="token operator">&gt;</span> maxSteps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>numberOfSteps <span class="token operator">&lt;</span> minSteps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stepValue <span class="token operator">/=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    numberOfSteps <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>graphRange <span class="token operator">/</span> stepValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    stepValue <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    numberOfSteps <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>graphRange <span class="token operator">/</span> stepValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'stepValue'</span><span class="token punctuation">,</span> stepValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'numberOfSteps'</span><span class="token punctuation">,</span> numberOfSteps<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 18</span>

<span class="token keyword">var</span> labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numberOfSteps <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  labels<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span>graphMin <span class="token operator">+</span> stepValue <span class="token operator">*</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token function">getDecimalPlaces</span><span class="token punctuation">(</span>stepValue<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ['15', '20', '25', '30', '35', '40', '45', '50', '55', '60', '65', '70', '75', '80', '85', '90', '95', '100']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'labels'</span><span class="token punctuation">,</span> labels<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="计算轴线"><a href="#计算轴线" class="header-anchor">#</a> 计算轴线</h2> <p>计算最长文本宽度</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> longestText <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">//if we are showing the labels</span>
<span class="token comment">// labels = ['15', '20', '25', '30', '35', '40', '45', '50', '55', '60', '65', '70', '75', '80', '85', '90', '95', '100']</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>scaleShowLabels<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>config<span class="token punctuation">.</span>scaleFontStyle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>config<span class="token punctuation">.</span>scaleFontSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>config<span class="token punctuation">.</span>scaleFontFamily<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> calculatedScale<span class="token punctuation">.</span>labels<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 计算文本宽度</span>
    <span class="token keyword">var</span> measuredText <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">measureText</span><span class="token punctuation">(</span>calculatedScale<span class="token punctuation">.</span>labels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    longestText <span class="token operator">=</span> measuredText <span class="token operator">&gt;</span> longestText <span class="token operator">?</span> measuredText <span class="token operator">:</span> longestText<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 文字之间加一点边距</span>
  longestText <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 最长longestText 宽度</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'longestText'</span><span class="token punctuation">,</span> longestText<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 30.021484375</span>
</code></pre></div><p>计算</p> <p><img src="/blogassets/img/image-20230109134811957.abf9e126.png" alt="image-20230109134811957"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 计算x轴的宽度</span>
<span class="token comment">// canvas宽度 - 最长左侧刻度文本宽度 - 下方名称最长文本宽度</span>
<span class="token comment">// longestText 左边刻度的最长文本</span>
<span class="token comment">// widestXLabel 下边名称的最长文本</span>
<span class="token comment">// 521.9609375</span>
xAxisLength <span class="token operator">=</span> width <span class="token operator">-</span> longestText <span class="token operator">-</span> widestXLabel<span class="token punctuation">;</span>
<span class="token comment">// 每一格的宽度74</span>
valueHop <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>xAxisLength <span class="token operator">/</span> data<span class="token punctuation">.</span>labels<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 条形图宽度 30</span>
barWidth <span class="token operator">=</span>
  <span class="token punctuation">(</span>valueHop <span class="token operator">-</span>
    config<span class="token punctuation">.</span>scaleGridLineWidth <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span>
    config<span class="token punctuation">.</span>barValueSpacing <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span>
    <span class="token punctuation">(</span>config<span class="token punctuation">.</span>barDatasetSpacing <span class="token operator">*</span> data<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span>
    <span class="token punctuation">(</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>barStrokeWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> data<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span>
  data<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

<span class="token comment">// y轴所在的x轴坐标 54.0302734375</span>
yAxisPosX <span class="token operator">=</span> width <span class="token operator">-</span> widestXLabel <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> xAxisLength<span class="token punctuation">;</span>
<span class="token comment">// x轴所在的y轴坐标 427</span>
xAxisPosY <span class="token operator">=</span> scaleHeight <span class="token operator">+</span> config<span class="token punctuation">.</span>scaleFontSize <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="绘制轴线"><a href="#绘制轴线" class="header-anchor">#</a> 绘制轴线</h2> <h3 id="canvas-坐标"><a href="#canvas-坐标" class="header-anchor">#</a> canvas 坐标</h3> <p><img src="data:image/png;base64,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" alt="image-20230109130024598"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="绘制-x-轴线"><a href="#绘制-x-轴线" class="header-anchor">#</a> 绘制 X 轴线</h3> <p><img src="data:image/png;base64,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Vs9qC7fe2rlo4dZby9RUn9tvtepDD3XWqY8+ell2PvWhh+rOnX0umJrqGs/zz/eu0PdONU3Xmrfd1mzdui5PnK6GWM7P13vvba6FudXwcPPUU3Wd5k3AYJmZKXv39n+SMD1dau392rz53OV1586FV17ZcPBg56INTz1VduzobUyrVW64oc7Olna7tNullIVt2y61lydPNgcPXri4Pvrowv79i+Nptzfcd1/53ve6xtPZbs/9arfPDg2VBx44/6aaRx4pe/f2zgyugPqh6enpOpj27av79i2/ysL4+MLYWJ8LJicXhoZqKbWUhfHxeubMpQ9nyW0dO7YwOrq4rdHROjnZu0Ip/b+611yYmIj3F/jYWxgbW5iY6HPB5GRdfnd97FgtpXd3d+JEz8KFsbFaSm23F39ut2sp/be4Qu324g6wZw85O3vheBYmJroWTk/32WdOTvZZWOvCxMQljXNZS6Vw4GM5Pd316+zrxIk+v55zD4XO/Wq3F383s7OXNJ6ltjUxsTA6unjj7XadnKyldDWv8zDq+U9utxeGhnrv3ZkzfR7owDWlsx/ou7+anAy7xMnJ/hP683dBndvvnpf3BmyVFsbHO7u+3q139oeHDnUt7BT93HgOHeq9s2fOfHDh7rGjE/7l/xMu1lIpHPSXYeu+fXViYrkXYOfny+2391k+NdUcPVqmpxdf7r/++mb//jo2Vh977OJHs9S25uaaAwea3/62DA93tlV2764TE12vFczOlsnJ3r89/OpXzfe/33vvNm+uExP1mWcufpzA1e7VV0spi7uUbvXVV+PfpJqjR8MLqp3b/+Y3u651662llPLGG6sZ6Iempsp775Xdu/tctHVrKaWePNm18HOf6/px166eO1ufeWbjE0/0v6e33VZKKX/968WM82INdixbrebo0ebb315mlbpnT5mc7LP8pZfq0FBPnJoHH2yOHr3oI06X2lb5y19K+fDBd25bnYfdmTOLP//jH+Ub3+i6VqtVn3225+X4xeveeWdz4IAjfeCaVd96q46NXeSVd+4snf3V+fuQmZmz5+0SF9N1441dV+wE7PTpVW+x1To7MdG8/HL/S0dGSq3Niy92LXz99T4DOO8GmwMHyt13L7XBhdHRixnnJRjsWC49t1q09FymOXq03Hxz79LOQ6HTttVag3lTM0jzJmCA/POfy106P18ffbRz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" alt="image-20230109130530668"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 设置线宽1，线的颜色</span>
ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> config<span class="token punctuation">.</span>scaleLineWidth<span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> config<span class="token punctuation">.</span>scaleLineColor<span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 画x轴</span>
ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>width <span class="token operator">-</span> widestXLabel <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> xAxisPosY<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (580,427)</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>width <span class="token operator">-</span> widestXLabel <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> xAxisLength <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">,</span> xAxisPosY<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (49,427)</span>
ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="绘制文本和网格"><a href="#绘制文本和网格" class="header-anchor">#</a> 绘制文本和网格</h3> <p><img src="data:image/png;base64,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" alt="image-20230109131131794"></p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> config<span class="token punctuation">.</span>scaleFontColor<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>labels<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 文本</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>
    data<span class="token punctuation">.</span>labels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
    yAxisPosX <span class="token operator">+</span> i <span class="token operator">*</span> valueHop <span class="token operator">+</span> valueHop <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
    xAxisPosY <span class="token operator">+</span> config<span class="token punctuation">.</span>scaleFontSize <span class="token operator">+</span> <span class="token number">3</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 画竖网格</span>
  ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>yAxisPosX <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> valueHop<span class="token punctuation">,</span> xAxisPosY <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> config<span class="token punctuation">.</span>scaleGridLineWidth<span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> config<span class="token punctuation">.</span>scaleGridLineColor<span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>yAxisPosX <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> valueHop<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="绘制-y-轴线"><a href="#绘制-y-轴线" class="header-anchor">#</a> 绘制 Y 轴线</h3> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnUAAAHTCAIAAADOOHltAAARgElEQVR4nO3dP0yc6YHH8ZdTYg/SJmIoTgdREsFKLhgpBVhKJDuyC9Ktlcrpks6mC6n2T+etsqZjO0xxktOtS1NS2NpMEWlnquBipWWkO2koHHlGiSXm0Gq54tGNOIPttf2DAfvzqQh4hueZd975vs8zw2Zsf3+/AgCi/m3UAwCAt5C+AkCevgJA3g+e94NWq3WS4wCAU2hhYeH1bvjcvr7JnQLAW+BNlpr2hwEgT18BIO9F+8PH6MGD6sGD0fzq7+Pq1erq1VEPAoAzbHR9/fTT0fzq70lfAXgDI+prVVVVtX/16tiVK6998729vf39/fPnzyeH9PDh2OlYWB/H7E4Pszu7zO7sMrsTNsq+jl25Ut269do333v69Lvvvjv/4x8nh3Tr1qneuAbgjPD5JgDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNXAMjTVwDI01cAyNNX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" alt="image-20230109131324178"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 绘制y轴线</span>
ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> config<span class="token punctuation">.</span>scaleLineWidth<span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> config<span class="token punctuation">.</span>scaleLineColor<span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>yAxisPosX<span class="token punctuation">,</span> xAxisPosY <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>yAxisPosX<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>绘制网格和文本</p> <p><img src="/blogassets/img/image-20230109131535732.9674455a.png" alt="image-20230109131535732"></p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'middle'</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> calculatedScale<span class="token punctuation">.</span>steps<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>yAxisPosX <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">,</span> xAxisPosY <span class="token operator">-</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> scaleHop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>scaleShowGridLines<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> config<span class="token punctuation">.</span>scaleGridLineWidth<span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> config<span class="token punctuation">.</span>scaleGridLineColor<span class="token punctuation">;</span>
    <span class="token comment">// 绘制横网格</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>yAxisPosX <span class="token operator">+</span> xAxisLength <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> xAxisPosY <span class="token operator">-</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> scaleHop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>yAxisPosX <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">,</span> xAxisPosY <span class="token operator">-</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> scaleHop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>scaleShowLabels<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 绘制左侧文本</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>
      calculatedScale<span class="token punctuation">.</span>labels<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>
      yAxisPosX <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">,</span>
      xAxisPosY <span class="token operator">-</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> scaleHop
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="绘制条形图"><a href="#绘制条形图" class="header-anchor">#</a> 绘制条形图</h2> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;datasets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;fillColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rgba(220,220,220,0.5)&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;strokeColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rgba(220,220,220,1)&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;fillColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rgba(151,187,205,0.5)&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;strokeColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rgba(151,187,205,1)&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">96</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>绘制条形图</p> <p><img src="/blogassets/img/image-20230109132656641.11069906.png" alt="image-20230109132656641"></p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> config<span class="token punctuation">.</span>barStrokeWidth<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 填充颜色</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> data<span class="token punctuation">.</span>datasets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>fillColor<span class="token punctuation">;</span>
  <span class="token comment">// 边框颜色</span>
  ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> data<span class="token punctuation">.</span>datasets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>strokeColor<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>datasets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> barOffset <span class="token operator">=</span>
      yAxisPosX <span class="token operator">+</span>
      config<span class="token punctuation">.</span>barValueSpacing <span class="token operator">+</span>
      valueHop <span class="token operator">*</span> j <span class="token operator">+</span>
      barWidth <span class="token operator">*</span> i <span class="token operator">+</span>
      config<span class="token punctuation">.</span>barDatasetSpacing <span class="token operator">*</span> i <span class="token operator">+</span>
      config<span class="token punctuation">.</span>barStrokeWidth <span class="token operator">*</span> i<span class="token punctuation">;</span>

    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>barOffset<span class="token punctuation">,</span> xAxisPosY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 绘制左边</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>
      barOffset<span class="token punctuation">,</span>
      xAxisPosY <span class="token operator">-</span>
        animPc <span class="token operator">*</span>
          <span class="token function">calculateOffset</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>datasets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> calculatedScale<span class="token punctuation">,</span> scaleHop<span class="token punctuation">)</span> <span class="token operator">+</span>
        config<span class="token punctuation">.</span>barStrokeWidth <span class="token operator">/</span> <span class="token number">2</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 绘制顶部</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>
      barOffset <span class="token operator">+</span> barWidth<span class="token punctuation">,</span>
      xAxisPosY <span class="token operator">-</span>
        animPc <span class="token operator">*</span>
          <span class="token function">calculateOffset</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>datasets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> calculatedScale<span class="token punctuation">,</span> scaleHop<span class="token punctuation">)</span> <span class="token operator">+</span>
        config<span class="token punctuation">.</span>barStrokeWidth <span class="token operator">/</span> <span class="token number">2</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 绘制右边</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>barOffset <span class="token operator">+</span> barWidth<span class="token punctuation">,</span> xAxisPosY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>barShowStroke<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 填充颜色</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="缓动方程式"><a href="#缓动方程式" class="header-anchor">#</a> 缓动方程式</h2> <blockquote><p>自定义参数随时间变化的速率。 现实生活中，物体并不是突然启动或者停止， 当然也不可能一直保持匀速移动。就像我们 打开抽屉的过程那样，刚开始拉的那一下动作很快， 但是当抽屉被拉出来之后我们会不自觉的放慢动作。 或是掉落在地板上的物体，一开始下降的速度很快， 接着就会在地板上来回反弹直到停止。 这个页面将帮助你选择正确的缓动函数。</p></blockquote> <p><a href="https://easings.net/zh-cn#" target="_blank" rel="noopener noreferrer">官网 <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://github.com/ai/easings.net/blob/master/src/easings/easingsFunctions.ts" target="_blank" rel="noopener noreferrer">github <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> animationOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">linear</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> t<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInQuad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> t <span class="token operator">*</span> t<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeOutQuad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> t <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInOutQuad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">--</span>t <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInCubic</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeOutCubic</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">/</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInOutCubic</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInQuart</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeOutQuart</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">/</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInOutQuart</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInQuint</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeOutQuint</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">/</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInOutQuint</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInSine</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeOutSine</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInOutSine</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInExpo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> t <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeOutExpo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> t <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInOutExpo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token operator">--</span>t<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInCirc</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> t<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeOutCirc</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">/</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInOutCirc</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> t <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInElastic</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token number">1.70158</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>p<span class="token punctuation">)</span> p <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> s <span class="token operator">=</span> p <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token punctuation">(</span>p <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">asin</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token punctuation">(</span>
      a <span class="token operator">*</span>
      Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span>
      Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">*</span> <span class="token number">1</span> <span class="token operator">-</span> s<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> p<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeOutElastic</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token number">1.70158</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>p<span class="token punctuation">)</span> p <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> s <span class="token operator">=</span> p <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token punctuation">(</span>p <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">asin</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      a <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">*</span> <span class="token number">1</span> <span class="token operator">-</span> s<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> p<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInOutElastic</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token number">1.70158</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>p<span class="token punctuation">)</span> p <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">0.3</span> <span class="token operator">*</span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> s <span class="token operator">=</span> p <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token punctuation">(</span>p <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">asin</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">-</span><span class="token number">0.5</span> <span class="token operator">*</span>
        <span class="token punctuation">(</span>a <span class="token operator">*</span>
          Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span>
          Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">*</span> <span class="token number">1</span> <span class="token operator">-</span> s<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> p<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      a <span class="token operator">*</span>
        Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span>
        Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">*</span> <span class="token number">1</span> <span class="token operator">-</span> s<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> p<span class="token punctuation">)</span> <span class="token operator">*</span>
        <span class="token number">0.5</span> <span class="token operator">+</span>
      <span class="token number">1</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInBack</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token number">1.70158</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>s <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">-</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeOutBack</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token number">1.70158</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">/</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>s <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInOutBack</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token number">1.70158</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">*</span> t <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s <span class="token operator">*=</span> <span class="token number">1.525</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">-</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s <span class="token operator">*=</span> <span class="token number">1.525</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInBounce</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">-</span> animationOptions<span class="token punctuation">.</span><span class="token function">easeOutBounce</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeOutBounce</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2.75</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">7.5625</span> <span class="token operator">*</span> t <span class="token operator">*</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token number">2.75</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">7.5625</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">1.5</span> <span class="token operator">/</span> <span class="token number">2.75</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">&lt;</span> <span class="token number">2.5</span> <span class="token operator">/</span> <span class="token number">2.75</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">7.5625</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2.25</span> <span class="token operator">/</span> <span class="token number">2.75</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">0.9375</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">7.5625</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2.625</span> <span class="token operator">/</span> <span class="token number">2.75</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">0.984375</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">easeInOutBounce</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> animationOptions<span class="token punctuation">.</span><span class="token function">easeInBounce</span><span class="token punctuation">(</span>t <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> animationOptions<span class="token punctuation">.</span><span class="token function">easeOutBounce</span><span class="token punctuation">(</span>t <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="增加动画"><a href="#增加动画" class="header-anchor">#</a> 增加动画</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">animationLoop</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> drawScale<span class="token punctuation">,</span> drawData<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// config.animation true时，有动画，false时无动画</span>
  <span class="token comment">// animationSteps 步骤，多少步达到1</span>
  <span class="token comment">// animationEasing 动画名称</span>
  <span class="token comment">// percentAnimComplete 0</span>
  <span class="token comment">// 假定config.animationSteps 60,animFrameAmount = 1/60</span>
  <span class="token keyword">var</span> animFrameAmount <span class="token operator">=</span> config<span class="token punctuation">.</span>animation
    <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token function">CapValue</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>animationSteps<span class="token punctuation">,</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token comment">// 动画函数</span>
  <span class="token keyword">var</span> easingFunction <span class="token operator">=</span> animationOptions<span class="token punctuation">[</span>config<span class="token punctuation">.</span>animationEasing<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 动画完成百分比</span>
  <span class="token keyword">var</span> percentAnimComplete <span class="token operator">=</span> config<span class="token punctuation">.</span>animation <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> drawScale <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token function-variable function">drawScale</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animLoop<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">animateFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> easeAdjustedAnimationPercent <span class="token operator">=</span> config<span class="token punctuation">.</span>animation
      <span class="token operator">?</span> <span class="token function">CapValue</span><span class="token punctuation">(</span><span class="token function">easingFunction</span><span class="token punctuation">(</span>percentAnimComplete<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">clear</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>scaleOverlay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">drawData</span><span class="token punctuation">(</span>easeAdjustedAnimationPercent<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 绘制刻度条</span>
      <span class="token function">drawScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 绘制刻度条</span>
      <span class="token function">drawScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 绘制图像传入小数值</span>
      <span class="token function">drawData</span><span class="token punctuation">(</span>easeAdjustedAnimationPercent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">animLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 加1/60</span>
    percentAnimComplete <span class="token operator">+=</span> animFrameAmount<span class="token punctuation">;</span>
    <span class="token function">animateFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//循环调用</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>percentAnimComplete <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animLoop<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> config<span class="token punctuation">.</span>onAnimationComplete <span class="token operator">==</span> <span class="token string">'function'</span><span class="token punctuation">)</span>
        config<span class="token punctuation">.</span><span class="token function">onAnimationComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-ac050c62><li class="level-2" data-v-ac050c62><a href="/blog/other/2023/0211003.html#计算-label-的最大宽度" class="sidebar-link reco-side-计算-label-的最大宽度" data-v-ac050c62>计算 label 的最大宽度</a></li><li class="level-2" data-v-ac050c62><a href="/blog/other/2023/0211003.html#计算画布最大高度" class="sidebar-link reco-side-计算画布最大高度" data-v-ac050c62>计算画布最大高度</a></li><li class="level-2" data-v-ac050c62><a href="/blog/other/2023/0211003.html#计算最大最小值" class="sidebar-link reco-side-计算最大最小值" data-v-ac050c62>计算最大最小值</a></li><li class="level-2" data-v-ac050c62><a href="/blog/other/2023/0211003.html#刻度计算-scale" class="sidebar-link reco-side-刻度计算-scale" data-v-ac050c62>刻度计算 scale</a></li><li class="level-3" data-v-ac050c62><a href="/blog/other/2023/0211003.html#保留小数位数" class="sidebar-link reco-side-保留小数位数" data-v-ac050c62>保留小数位数</a></li><li class="level-3" data-v-ac050c62><a href="/blog/other/2023/0211003.html#计算数量级" class="sidebar-link reco-side-计算数量级" data-v-ac050c62>计算数量级</a></li><li class="level-3" data-v-ac050c62><a href="/blog/other/2023/0211003.html#计算刻度相关参数" class="sidebar-link reco-side-计算刻度相关参数" data-v-ac050c62>计算刻度相关参数</a></li><li class="level-2" data-v-ac050c62><a href="/blog/other/2023/0211003.html#计算轴线" class="sidebar-link reco-side-计算轴线" data-v-ac050c62>计算轴线</a></li><li class="level-2" data-v-ac050c62><a href="/blog/other/2023/0211003.html#绘制轴线" class="sidebar-link reco-side-绘制轴线" data-v-ac050c62>绘制轴线</a></li><li class="level-3" data-v-ac050c62><a href="/blog/other/2023/0211003.html#canvas-坐标" class="sidebar-link reco-side-canvas-坐标" data-v-ac050c62>canvas 坐标</a></li><li class="level-3" data-v-ac050c62><a href="/blog/other/2023/0211003.html#绘制-x-轴线" class="sidebar-link reco-side-绘制-x-轴线" data-v-ac050c62>绘制 X 轴线</a></li><li class="level-3" data-v-ac050c62><a href="/blog/other/2023/0211003.html#绘制文本和网格" class="sidebar-link reco-side-绘制文本和网格" data-v-ac050c62>绘制文本和网格</a></li><li class="level-3" data-v-ac050c62><a href="/blog/other/2023/0211003.html#绘制-y-轴线" class="sidebar-link reco-side-绘制-y-轴线" data-v-ac050c62>绘制 Y 轴线</a></li><li class="level-2" data-v-ac050c62><a href="/blog/other/2023/0211003.html#绘制条形图" class="sidebar-link reco-side-绘制条形图" data-v-ac050c62>绘制条形图</a></li><li class="level-2" data-v-ac050c62><a href="/blog/other/2023/0211003.html#缓动方程式" class="sidebar-link reco-side-缓动方程式" data-v-ac050c62>缓动方程式</a></li><li class="level-2" data-v-ac050c62><a href="/blog/other/2023/0211003.html#增加动画" class="sidebar-link reco-side-增加动画" data-v-ac050c62>增加动画</a></li></ul></main></div> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/blog/assets/js/app.ba2a4ce1.js" defer></script><script src="/blog/assets/js/6.8cba4c74.js" defer></script><script src="/blog/assets/js/1.06eefe51.js" defer></script><script src="/blog/assets/js/22.1e20a2ba.js" defer></script>
  </body>
</html>
